<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Loops in Python &mdash; ME 400 Course Notes Fall 2018 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'Fall 2018',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="ME 400 Course Notes Fall 2018 documentation" href="../index.html" />
    <link rel="next" title="More on Loops" href="More_on_Loops.html" />
    <link rel="prev" title="Lecture 7 - More on Conditionals" href="More_on_Conditionals.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Loops-in-Python">
<h1>Loops in Python<a class="headerlink" href="#Loops-in-Python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Overview,-Objectives,-and-Key-Terms">
<h2>Overview, Objectives, and Key Terms<a class="headerlink" href="#Overview,-Objectives,-and-Key-Terms" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference external" href="ME400_Lecture_5.ipynb">Lecture 5</a>, the basics of programming
logic were introduced, including the idea of <em>iteration</em>. The emphasis
here and in <a class="reference external" href="ME400_Lecture_9.ipynb">Lecture 9</a> is on the logic of
<em>iteration</em> and its implementation via <code class="docutils literal"><span class="pre">while</span></code> and <code class="docutils literal"><span class="pre">for</span></code> loops in
Python. To proceed, one must be comfortable with the theoretical
coverage of iteration presented in <a class="reference external" href="ME400_Lecture_5.ipynb">Lecture
5</a>.</p>
<div class="section" id="Objectives">
<h3>Objectives<a class="headerlink" href="#Objectives" title="Permalink to this headline">¶</a></h3>
<p>By the end of this lesson, you should be able to</p>
<ul class="simple">
<li>Use a <code class="docutils literal"><span class="pre">while</span></code> loop to solve simple problems using iteration</li>
<li>Turn pseudocode and flowcharts into Python code</li>
<li>Use the graphical debugger in Spyder to trace and debug a program
with iteration</li>
</ul>
</div>
<div class="section" id="Key-Terms">
<h3>Key Terms<a class="headerlink" href="#Key-Terms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">while</span></code></li>
<li><code class="docutils literal"><span class="pre">break</span></code></li>
<li>summation problem (as a common loop example)</li>
<li>numerical convergence (as another common loop example)</li>
<li>convergence criterion</li>
</ul>
</div>
</div>
<div class="section" id="A-Motivating-Problem">
<h2>A Motivating Problem<a class="headerlink" href="#A-Motivating-Problem" title="Permalink to this headline">¶</a></h2>
<p>To jumpstart the lesson, let&#8217;s first look back to the example from
<a class="reference external" href="ME400_Lecture_5.ipynb">Lecture 5</a> in which the elements of an array
<code class="docutils literal"><span class="pre">a</span></code> are printed. The algorithm, in pseudocode, for solving that task
is repeated here:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;Algorithm to print out the elements of an array&#39;&#39;&#39;</span>
<span class="n">Input</span> <span class="n">a</span> <span class="ow">and</span> <span class="n">n</span> <span class="c1"># where n is the length of array a</span>
<span class="n">Set</span> <span class="n">i</span> <span class="n">to</span> <span class="mi">0</span>
<span class="n">While</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span>
    <span class="n">Print</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">Set</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p>We can do that in Python using a nearly identical syntax:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">])</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>    <span class="c1"># always remember the :</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="c1"># indented 4 spaces</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>   <span class="c1"># also indented 4 spaces</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
1
2
3
5
8
13
</pre></div></div>
</div>
<p>Just like the <code class="docutils literal"><span class="pre">if</span></code> statement, the <code class="docutils literal"><span class="pre">while</span></code> statement requires the
pesky <code class="docutils literal"><span class="pre">:</span></code> after the condition. Moreover, all the things to be done at
each iteration must be underneath and indented to the right of the
<code class="docutils literal"><span class="pre">while</span></code>.</p>
<p>Here&#8217;s a slightly different problem, and one that serves as a template
for many other problems: <em>add the integers from 1 through n</em>. An
algorithm for solving the problem is shown below.</p>
<div class="figure" id="id1">
<img alt="Flowchart for adding integers" src="../_images/add_integer_range.png" />
<p class="caption"><span class="caption-text">Flowchart for adding integers</span></p>
</div>
<p>This flowchart is very similar to the one we saw earlier for printing
the element. The only real addition is the new variable <code class="docutils literal"><span class="pre">s</span></code>, short for
sum.</p>
<blockquote>
<div><strong>Exercise</strong>: Explain why using <code class="docutils literal"><span class="pre">s</span></code> is better than using <code class="docutils literal"><span class="pre">sum</span></code>
for representing our integer sum.</div></blockquote>
<p>We can adapt this flowchart directly to Python:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># or we could use input</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
55
</pre></div></div>
</div>
<p>Is that right? A useful formula for the same sum is
<span class="math">\(s = \frac{(n+1)n}{2}\)</span>, and substitution of <span class="math">\(n = 10\)</span> does
yield <span class="math">\(s = 55\)</span>.</p>
<p>Iteration is challenging, for sure. Here are some simple exercises to
tackle based on the example above for which you should be able to
compute the expected value readily with pen and paper:</p>
<blockquote>
<div><p><strong>Exercise</strong>: Write a short program using a <code class="docutils literal"><span class="pre">while</span></code> loop to
compute the sum of the integers from <span class="math">\(m\)</span> through <span class="math">\(n\)</span>.
What is the analytical expression for that sum?</p>
<p><strong>Exercise</strong>: Write a short program using a <code class="docutils literal"><span class="pre">while</span></code> loop to
compute the product of the integers from 1 through <span class="math">\(n\)</span>. (What
is that product called?)</p>
<p><strong>Exercise</strong>: Write a short program using a <code class="docutils literal"><span class="pre">while</span></code> loop to
compute <span class="math">\(a^n\)</span> given a number (<code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">float</span></code>) <code class="docutils literal"><span class="pre">a</span></code> and
an integer <code class="docutils literal"><span class="pre">n</span></code>.</p>
</div></blockquote>
</div>
<div class="section" id="The-break-Clause">
<h2>The <code class="docutils literal"><span class="pre">break</span></code> Clause<a class="headerlink" href="#The-break-Clause" title="Permalink to this headline">¶</a></h2>
<p>So far, iteration has been limited to cases in which a fixed number of
iterations is executed, usually with a condition like
<code class="docutils literal"><span class="pre">counter</span> <span class="pre">&lt;</span> <span class="pre">max_counter</span></code>. Sometimes, iteration should cease based on
criteria that can be satisfied at any value of <code class="docutils literal"><span class="pre">counter</span></code> and for
reasons unrelated to <code class="docutils literal"><span class="pre">counter</span></code>.</p>
<p>As a simple example, suppose we modify the integer summation problem and
look instead for the largest value of <code class="docutils literal"><span class="pre">n</span></code> that leads to a sum <code class="docutils literal"><span class="pre">s</span></code>
below some maximum value <code class="docutils literal"><span class="pre">s_max</span></code>. You might be tempted to do the
following:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">s_max</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="n">s_max</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;i = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;s = &quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
i =  14
s =  105
</pre></div></div>
</div>
<p>That&#8217;s close, but not quite right: the final value of <code class="docutils literal"><span class="pre">s</span></code> is <em>greater</em>
then the maximum value of 100. The problem here is that the loop has to
repeat <em>until</em> it has produced an <code class="docutils literal"><span class="pre">s</span></code> that exceeds the maximum. Thus,
in order to terminate, we must already have a value for <code class="docutils literal"><span class="pre">s</span></code> greater
than we want. A simple fix is a post correction, e.g.,</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">s_max</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="n">s_max</span><span class="p">:</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">i</span> <span class="c1"># subtract off the last amount added</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1"># and adjust i accordingly</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;i = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;s = &quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
i =  13
s =  91
</pre></div></div>
</div>
<p>However, such corrections are not always easy to do. Instead, we can
reorganize the <code class="docutils literal"><span class="pre">while</span></code> so that it terminates from within the loop. It
all starts with the <em>infinite</em> loop:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;this line will be displayed over and over again!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This loop will never end unless you terminate execution from outside the
interpreter. In Spyder, that&#8217;s done by pressing the little red square to
the upper right of the console. It runs forever because the condition is
<code class="docutils literal"><span class="pre">while</span> <span class="pre">True</span></code> and nothing can ever turn <code class="docutils literal"><span class="pre">True</span></code> into <code class="docutils literal"><span class="pre">False</span></code>. What
we need is some condition within the loop that leads to termination of
the iteration. Such conditions can be implemented using the <code class="docutils literal"><span class="pre">break</span></code>
clause:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;this line will now be displayed just once!&quot;</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
this line will now be displayed just once!
</pre></div></div>
</div>
<p>A <code class="docutils literal"><span class="pre">break</span></code> statement may be used anywhere within a <code class="docutils literal"><span class="pre">while</span></code> loop.
Here, <code class="docutils literal"><span class="pre">break</span></code> is executed after just the first iteration. If, instead,
we wanted to print the message twice, we could do</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;this line will now be displayed just once!&quot;</span><span class="p">)</span>
    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
this line will now be displayed just once!
this line will now be displayed just once!
</pre></div></div>
</div>
<p>Note that an <code class="docutils literal"><span class="pre">if</span></code> statement has been inserted within the <code class="docutils literal"><span class="pre">while</span></code>
statement. Just like <code class="docutils literal"><span class="pre">if</span></code> statements can be nested in other <code class="docutils literal"><span class="pre">if</span></code>
statements, so to can they be nested inside <code class="docutils literal"><span class="pre">while</span></code> (and <code class="docutils literal"><span class="pre">for</span></code>, and
other constructs).</p>
<p>By using the <code class="docutils literal"><span class="pre">break</span></code> statement, we can reorganize our program for
finding the</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">s_max</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="n">s_max</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;i = &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;s = &quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
i =  13
s =  91
</pre></div></div>
</div>
<p>This output is identical to the previous version, and no
post-corrections are needed.</p>
<blockquote>
<div><strong>Exercise:</strong> Run this program in Spyder and use the graphical
debugger to trace its execution.</div></blockquote>
</div>
<div class="section" id="Numerical-Convergence">
<h2>Numerical Convergence<a class="headerlink" href="#Numerical-Convergence" title="Permalink to this headline">¶</a></h2>
<p>The integer summation problem posed above is one of the canonical
examples to use iteration, and it serves as a template for many other
tasks. An equally important example is that of <em>numerical convergence</em>.</p>
<p>A very common goal in numerical computing is to produce a sequence of
numbers that converges (in the limit of many terms) to some value of
interest or, more often, as close to that value of interest as is
desired. For example, Taylor series (and similar series) expansions can
be used to evaluate the value of mathematical functions near a point of
interest. The Taylor series expansion of <span class="math">\(\frac{1}{1-x}\)</span> about
<span class="math">\(x=0\)</span> is given by</p>
<div class="math">
\[y(x) = \frac{1}{1-x} = 1 + x + x^2 + \sum^{\infty}_{n=3} x^n \, .\]</div>
<p>and for very small <span class="math">\(x\)</span> (<span class="math">\(|x| \ll 1\)</span>), we&#8217;d expect just the
first few terms of the series to be suffient for approximating
<span class="math">\(y(x)\)</span> because <span class="math">\(x^i\)</span> is smaller and smaller for increasing
<span class="math">\(i\)</span>. The questions, though, are (1) <em>how good is good enough?</em> and
(2) <em>when do we know to stop?</em></p>
<p>The answer to the first question depends on the problem and what sort of
information is provided. If the goal is to approximate some quantity,
then very rarely is the exact value of that quantity known (otherwise,
why would we need the approximation?). For such cases, we can only
<em>estimate</em> how good an approximation is.</p>
<p><strong>Exercise</strong>: Let <span class="math">\(y(x) = 1/(1-x)\)</span>. Approximate <span class="math">\(y(0.1)\)</span> by
using the series above, and terminate the iteration when the magnitude
of the next term to be added is less than or equal to
<span class="math">\(\tau = 10^{-4}\)</span>. Print out the approximate value for <span class="math">\(y\)</span>,
the true value of <span class="math">\(y\)</span>, and the number of iterations performed.</p>
<p><em>Solution</em>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="c1"># reference (exact) y</span>
<span class="n">ya</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># approximate y</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># iteration counter</span>
<span class="k">while</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-4</span><span class="p">:</span>
    <span class="n">ya</span> <span class="o">+=</span> <span class="n">x</span><span class="o">**</span><span class="n">i</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;approximate value &#39;</span><span class="p">,</span> <span class="n">ya</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;  reference value &#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;  # of iterations &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
approximate value  0.9091
  reference value  0.9090909090909091
  # of iterations  5
</pre></div></div>
</div>
<p>The trick here is to iterate only as long as the next term to be added
<span class="math">\(x^i\)</span> is greater then the tolerance <span class="math">\(\tau\)</span>. Here, that
threshold is <span class="math">\(10^{-4}\)</span>. Although the sum of all the terms we&#8217;re
neglecting could be larger than the tolerance, often the series
converges rapidly enough for such a criterion to work well in practice.</p>
<blockquote>
<div><strong>Note</strong>: A common termination criterion is
<span class="math">\(|y_a - y^{old}_a| &lt; \tau\)</span>, where <span class="math">\(y_a\)</span> is the current
approximation to <span class="math">\(y\)</span>, <span class="math">\(y_a^{old}\)</span> is the previous value
of <span class="math">\(y_a\)</span>, and <span class="math">\(\tau\)</span> is the tolerance.</div></blockquote>
<p>Sometimes, it&#8217;s not easy to pick a suitable tolerance. For some values
of <span class="math">\(x\)</span>, the program above requires 1000&#8217;s of iterations, way more
than the 5 observed for <span class="math">\(x=-0.1\)</span>. An useful alternative (or
additional) termination criterion is to set a maximum number of
iterations. By using both, one can provide a program that will produce a
solution that meets the tolerance for any case not exceeding the maximum
number of iterations allowed.</p>
<blockquote>
<div><strong>Note</strong>: It is good practice to include a limit on the number of
iterations in addition to a tolerance on the approximation.</div></blockquote>
<p>Based on this discussion, try tackling the following:</p>
<blockquote>
<div><p><strong>Exercise</strong>: Explain why we would not want to use
<code class="docutils literal"><span class="pre">while</span> <span class="pre">x**i</span> <span class="pre">&gt;</span> <span class="pre">1e-4</span></code>.</p>
<p><strong>Exercise</strong>: Modify this program to compute no more than 20 terms
of the series. For <code class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0.99</span></code>, which condition causes the loop to
terminate? What is the final value of <code class="docutils literal"><span class="pre">ya</span></code>?</p>
<p><strong>Exercise</strong>: Modify this program to use the absolute error
<code class="docutils literal"><span class="pre">abs(y-ya)</span></code>. Do the results differ? By how much?</p>
</div></blockquote>
<p>This program for approximating <span class="math">\(1/(1+x)\)</span> is a great one for
understanding how iteration can be used to solve numerical problems. The
same pattern (i.e., keep iterating until the approximation looks good
enough) shows up all over the place in the solution of both linear
systems (i.e., <span class="math">\(\mathbf{Ax}=\mathbf{b}\)</span>) and nonlinear systems
(e.g., finding the roots of <span class="math">\(f(x)\)</span>).</p>
</div>
<div class="section" id="Further-Reading">
<h2>Further Reading<a class="headerlink" href="#Further-Reading" title="Permalink to this headline">¶</a></h2>
<p>None at this time.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Loops in Python</a><ul>
<li><a class="reference internal" href="#Overview,-Objectives,-and-Key-Terms">Overview, Objectives, and Key Terms</a><ul>
<li><a class="reference internal" href="#Objectives">Objectives</a></li>
<li><a class="reference internal" href="#Key-Terms">Key Terms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#A-Motivating-Problem">A Motivating Problem</a></li>
<li><a class="reference internal" href="#The-break-Clause">The <code class="docutils literal"><span class="pre">break</span></code> Clause</a></li>
<li><a class="reference internal" href="#Numerical-Convergence">Numerical Convergence</a></li>
<li><a class="reference internal" href="#Further-Reading">Further Reading</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="More_on_Conditionals.html" title="previous chapter">Lecture 7 - More on Conditionals</a></li>
      <li>Next: <a href="More_on_Loops.html" title="next chapter">More on Loops</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/lectures/Loops_in_Python.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Jeremy Roberts.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/lectures/Loops_in_Python.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>